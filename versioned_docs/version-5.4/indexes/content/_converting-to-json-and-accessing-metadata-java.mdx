import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

<Admonition type="note" title="">

Entities passed to an index can be converted to JSON using the `AsJson` method.  
It is also possible to access metadata for a specified object using the `MetadataFor` method.  

* In this Page:  
   * [AsJson - Converting to JSON](../../indexes/converting-to-json-and-accessing-metadata.mdx#asjson---converting-to-json)  
   * [MetadataFor - Accessing Metadata](../../indexes/converting-to-json-and-accessing-metadata.mdx#metadatafor---accessing-metadata)  

</Admonition>
## AsJson - Converting to JSON

<TabItem value="indexes_1" label="indexes_1">
<CodeBlock language="java">
{`public static class Products_AllProperties extends AbstractIndexCreationTask \{
    public static class Result \{
        private String query;

        public String getQuery() \{
            return query;
        \}

        public void setQuery(String query) \{
            this.query = query;
        \}
    \}

    public Products_AllProperties() \{
        map = "docs.Products.Select(product => new \{ " +
            // convert product to JSON and select all properties from it
            "    Query = this.AsJson(product).Select(x => x.Value) " +
            "\})";

        // mark 'query' field as analyzed which enables full text search operations
        index("Query", FieldIndexing.SEARCH);;
    \}
\}
`}
</CodeBlock>
</TabItem>

<TabItem value="indexes_2" label="indexes_2">
<CodeBlock language="java">
{`List<Product> results = session
    .query(Products_AllProperties.Result.class, Products_AllProperties.class)
    .whereEquals("Query", "Chocolade")
    .ofType(Product.class)
    .toList();
`}
</CodeBlock>
</TabItem>



## MetadataFor - Accessing Metadata

<TabItem value="indexes_3" label="indexes_3">
<CodeBlock language="java">
{`public static class Products_WithMetadata extends AbstractIndexCreationTask \{
    public static class Result \{
        private Date lastModified;

        public Date getLastModified() \{
            return lastModified;
        \}

        public void setLastModified(Date lastModified) \{
            this.lastModified = lastModified;
        \}
    \}

    public Products_WithMetadata() \{
        map = "docs.Products.Select(product => new \{ " +
            "    Product = Product, " +
            "    Metadata = this.MetadataFor(product) " +
            "\}).Select(this0 => new \{ " +
            "    LastModified = this0.metadata.Value<DateTime>(\\"Last-Modified\\") " +
            "\})";
    \}
\}
`}
</CodeBlock>
</TabItem>

<TabItem value="indexes_4" label="indexes_4">
<CodeBlock language="java">
{`List<Product> results = session
    .query(Products_WithMetadata.Result.class, Products_WithMetadata.class)
    .orderByDescending("LastModified")
    .ofType(Product.class)
    .toList();
`}
</CodeBlock>
</TabItem>





import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

<Admonition type="note" title="">

* A session object is obtained from the [document store](../../../client-api/what-is-a-document-store.mdx).  

* Various session options can be configured using the `SessionOptions` object.  
  If no database is specified in the options then the [default database](../../../client-api/setting-up-default-database.mdx) is assumed.  

* Most methods on the session object are asynchronous and return a `Promise`.    
  Either use `async & await` or `.then() & callback functions`.  
  Refer to the specific documentation for each method usage.

* In this page:  
  * [Syntax](../../../client-api/session/opening-a-session.mdx#syntax)  
  * [Session options](../../../client-api/session/opening-a-session.mdx#session-options)  
  * [Open session example](../../../client-api/session/opening-a-session.mdx#open-session-example)
</Admonition>
## Syntax

* Use `openSession()` to open a session from the document store.  
* The following overloads are available:

<TabItem value="open_session_1" label="open_session_1">
<CodeBlock language="js">
{`openSession();

openSession(database);

openSession(sessionOptions);
`}
</CodeBlock>
</TabItem>

| Parameter    | Type             | Description                                                                                                                    |
|--------------|------------------|--------------------------------------------------------------------------------------------------------------------------------|
| **database** | string           | The session will operate on this database,<br/>overriding the default database set in the document store.                       |
| **options**  | `SessionOptions` | An object with session configuration options. See details [below](../../../client-api/session/opening-a-session.mdx#session-options). |

| Return Value        | Description                    |
|---------------------|--------------------------------|
| `IDocumentSession`  | Instance of a session object   |



## Session options

* The `SessionOptions` object contains various options to configure the Session's behavior.

| Option              | Type              | Description                                                                                                                                                                                                                               | Default Value                                          |
|---------------------|-------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
| **database**        | string            | The session will operate on this database,<br/>overriding the Default Database.                                                                                                                                                            | `null` - the session operates on the Default Database |
| **noTracking**      | boolean           | `true` - The session tracks changes made to all entities it loaded, stored, or queried for.<br/>`false` - Tracking will be turned off.<br/>Learn more in [Disable tracking](../../../client-api/session/configuration/how-to-disable-tracking.mdx) | `false`                                                |
| **noCaching**       | boolean           | `true` - Server responses will Not be cached.<br/>`false` - The session caches the server responses.<br/>Learn more in [Disable caching](../../../client-api/session/configuration/how-to-disable-caching.mdx)                                     | `false`                                                |
| **requestExecutor** | `RequestExecutor` | ( _Advanced option_ ) <br/>The request executor the session should use.                                                                                                                                                                    | `null` - the default request executor is used          |
| **transactionMode** | `TransactionMode` | Specify the session's transaction mode<br/>`SingleNode` / `ClusterWide`<br/>Learn more in [Cluster-wide vs. Single-node](../../../client-api/session/cluster-transaction/overview.mdx#cluster-wide-transaction-vs-single-node-transaction)        | `SingleNode`                                           |

* Experts Only:

| Option                                                         | Type     | Description                                                                                                                                                                                                                                             | Default Value |
|----------------------------------------------------------------|----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
| **disableAtomicDocumentWrites-<br/>InClusterWideTransaction**   | boolean  | ( _Experts only_ ) <br/>`true` - Disable Atomic-Guards in cluster-wide sessions.<br/>`false` - Automatic atomic writes in cluster-wide sessions are enabled.<br/>Learn more in [Atomic-Guards](../../../compare-exchange/atomic-guards.mdx) | `false`       |



## Open session example

* The following example opens a **cluster-wide Session**:

<Tabs groupId='languageSyntax'>
<TabItem value="Using-await" label="Using-await">
<CodeBlock language="js">
{`// Open the session, pass the options object to the session
const session = documentStore.openSession({
    database: "your_database_name",
    transactionMode: "ClusterWide"
});

//   Run your business logic:
//
//   Store entities
//   Load and Modify entities
//   Query indexes & collections
//   Delete documents
//   ... etc.

// For example: load a document and modify it
// Note: 'load' returns a Promise and must be awaited
const entity = await session.load("companies/1-A");
entity.name = "NewCompanyName";

// Save you changes
// Note: 'saveChanges' also returns a Promise and must be awaited
await session.saveChanges();
// When 'SaveChanges' returns successfully,
// all changes made to the entities in the session are persisted to the documents in the database
`}
</CodeBlock>
</TabItem>
<TabItem value="Using-then" label="Using-then">
<CodeBlock language="js">
{`// Open the session, pass the options object to the session
const session = documentStore.openSession({
    database: "your_database_name",
    transactionMode: "ClusterWide"
});

//   Run your business logic:
//
//   Store entities
//   Load and Modify entities
//   Query indexes & collections
//   Delete documents
//   ... etc.

// For example: load a document, modify it, and save
// Note: 'load' & 'saveChanges' each return a Promise that is then handled by callback functions
session.load("companies/1-A")
    .then((company) => {
        company.name = "NewCompanyName";
    })
    .then(() => session.saveChanges())
    .then(() => {
        // When 'SaveChanges' returns successfully,
        // all changes made to the entities in the session are persisted to the documents in the database
    });
`}
</CodeBlock>
</TabItem>
</Tabs>





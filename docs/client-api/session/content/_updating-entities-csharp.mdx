import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

<Admonition type="note" title="">

* To modify existing documents:

    * **Retrieve** documents from the database using [Load](../../../client-api/session/loading-entities.mdx#load) or by a [Query](../../../querying/overview.mdx#sessionquery).  
      The entities loaded from the documents are added to the internal entities map that the Session manages.
  
    * **Edit** the properties you wish to change.  
      The session will track all changes made to the loaded entities.

    * **Save** to apply the changes.  
      Once `SaveChanges()` returns it is guaranteed that the data is persisted in the database.
      


* In this page:
    * [Load a document & update](../../../client-api/session/updating-entities.mdx#load-a-document--update)
    * [Query for documents & update](../../../client-api/session/updating-entities.mdx#query-for-documents--update)
    
</Admonition>
## Load a document & update

* In this example we `Load` a company document and update its **PostalCode** property.  

<Tabs groupId='languageSyntax'>
<TabItem value="Sync" label="Sync">
<CodeBlock language="csharp">
{`using (var session = store.OpenSession())
{
    // Load a company document
    // The entity loaded from the document will be added to the Session's entities map
    Company company = session.Load<Company>("companies/1-A");

    // Update the company's PostalCode
    company.Address.PostalCode = "TheNewPostalCode";

    // Apply changes
    session.SaveChanges();
}
`}
</CodeBlock>
</TabItem>
<TabItem value="Async" label="Async">
<CodeBlock language="csharp">
{`using (var asyncSession = store.OpenAsyncSession())
{
    // Load a document
    // The entity loaded from the document will be added to the Session's entities map
    Company company = await asyncSession.LoadAsync<Company>("companies/KitchenAppliances");

    // Update the company's PostalCode
    company.Address.PostalCode = "TheNewPostalCode";

    // Apply changes
    await asyncSession.SaveChangesAsync();
}
`}
</CodeBlock>
</TabItem>
</Tabs> 



## Query for documents & update

* In this example we `Query` for company documents whose **PostalCode** property is _12345_,  
  and modify this property for the matching documents.  

<Tabs groupId='languageSyntax'>
<TabItem value="Sync" label="Sync">
<CodeBlock language="csharp">
{`using (var session = store.OpenSession())
{
    // Query: find companies with the specified PostalCode
    // The entities loaded from the matching documents will be added to the Session's entities map
    IRavenQueryable<Company> query = session.Query<Company>()
        .Where(c => c.Address.PostalCode == "12345");

    var matchingCompanies = query.ToList();

    // Update the PostalCode for the resulting company documents
    for (var i = 0; i < matchingCompanies.Count; i++)
    {
        matchingCompanies[i].Address.PostalCode = "TheNewPostalCode";
    }

    // Apply changes
    session.SaveChanges();
}
`}
</CodeBlock>
</TabItem>
<TabItem value="Async" label="Async">
<CodeBlock language="csharp">
{`using (var asyncSession = store.OpenAsyncSession())
{
    // Query: find companies with the specified PostalCode
    // The entities loaded from the matching documents will be added to the Session's entities map
    IRavenQueryable<Company> query = asyncSession.Query<Company>()
        .Where(c => c.Address.PostalCode == "12345");

    var matchingCompanies = await query.ToListAsync();

    // Update the PostalCode for the resulting company documents
    for (var i = 0; i < matchingCompanies.Count; i++)
    {
        matchingCompanies[i].Address.PostalCode = "TheNewPostalCode";
    }

    // Apply changes
    await asyncSession.SaveChangesAsync();
}
`}
</CodeBlock>
</TabItem>
</Tabs> 





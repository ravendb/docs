---
title: "Data Migration"
sidebar_label: Data migration
sidebar_position: 0
---

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import LanguageSwitcher from "@site/src/components/LanguageSwitcher";
import LanguageContent from "@site/src/components/LanguageContent";
import Panel from "@site/src/components/Panel";
import ContentFrame from "@site/src/components/ContentFrame";

# Data Migration
<Admonition type="note" title="">

* Upgrading RavenDB `6.x` and above to a higher version supports in-place data migration: exporting and re-importing the data are not needed.  

* Create a backup of your data before upgrading, to avoid any data loss in case of unexpected issues.

* Find a migration guide for RavenDB `5.x` and earlier versions [here](../../migration/server/legacy-versions-data-migration.mdx).

* In this article:
    * [Migration to RavenDB 7.x from a lower version](../../migration/server/data-migration#migration-to-ravendb-7-x-from-a-lower-version)
       * [Migration and NLog](../../migration/server/data-migration#migration-and-nlog)
       * [Migration and HTTP compression](../../migration/server/data-migration#migration-and-http-compression)
    * [Migrating data into a sharded database](../../migration/server/data-migration.mdx#migrating-data-into-a-sharded-database)

</Admonition>

<Panel heading="Migration to RavenDB 7.x from a lower version">

<ContentFrame>

### Migration and NLog

Starting with version `7.0`, RavenDB incorporates the 
[NLog logging framework](../../server/troubleshooting/logging.mdx) and writes all log 
data through it.  

Logging settings applied in earlier RavenDB versions are respected by RavenDB `7.x`, 
and logging should continue by these settings without interference after the migration.  

If you want to use NLog-specific features, though, you will have to address a different set 
of settings that NLog requires.  
[Learn more here about migration and the new logging system.](../../server/troubleshooting/logging.mdx#customize-after-migration).  

</ContentFrame>
<ContentFrame>

### Migration and HTTP compression

From RavenDB `7.0` on, the default HTTP compression algorithm is `Zstd`.  
Earlier versions used `Gzip`.  

* If your current server version is `6.0` or higher, the compression algorithm will present no problem while connecting it to RavenDB `7.0` or higher and migrating your data.  

* If your current server version is `5.4` or earlier, attempting to connect it to a server that uses the `Zstd` compression algorithm will fail.  
  For the connection to succeed, you need to:
   1. Temporarily switch the target version `7.x` server compression algorithm to `Gzip`.  
      Do this by defining a `RAVEN_HTTP_COMPRESSION_ALGORITHM` environment variable on 
      the `7.x` server machine and setting its value to `Gzip`, and restarting the server.  
   2. Connect your current server to the new server and perform the migration.  
   3. When the new server is updated, remove the environment variable and restart the server.  

</ContentFrame>

</Panel>

## Migrating data into a sharded database

If you want to migrate your data to a [sharded](../../sharding/overview.mdx) database (supported by RavenDB `6.0` and above),  
please read the related article [here](../../sharding/migration.mdx).



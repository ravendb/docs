---
title: "Migration: previous-versions breaking changes"
sidebar_label: Previous versions breaking changes
sidebar_position: 4
---

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import Panel from '@site/src/components/Panel';
import ContentFrame from "@site/src/components/ContentFrame";

# Migration: previous-versions breaking changes

<Admonition type="note" title="">

* This page lists breaking changes introduced in RavenDB versions earlier than `7.2`.  
  Each breaking change indicates a behavior change or a function that is no longer available in the specified version.

* Find RavenDB `7.2` breaking changes [here](../../migration/server/server-breaking-changes.mdx).

* In this article:  
   * [RavenDB 7.0 breaking changes](../../migration/server/previous-versions-server-breaking-changes#ravendb-7-0-breaking-changes)  
      * [RavenDB incorporates NLog as its logging system](../../migration/server/previous-versions-server-breaking-changes#ravendb-incorporates-nlog-as-its-logging-system)  
      * [Removed obsolete properties](../../migration/server/previous-versions-server-breaking-changes#removed-obsolete-properties)  
   * [RavenDB 6.2 breaking changes](../../migration/server/previous-versions-server-breaking-changes#ravendb-6-2-breaking-changes)  
      * [MSSQL connection string requires an Encrypt property](../../migration/server/previous-versions-server-breaking-changes#mssql-connection-string-requires-an-encrypt-property)  
      * [Corax handling of complex JSON objects in static indexes is configurable](../../migration/server/previous-versions-server-breaking-changes#corax-handling-of-complex-json-objects-in-static-indexes-is-configurable)  
      * [Customizable identifier parts separator](../../migration/server/previous-versions-server-breaking-changes#customizable-identifier-parts-separator)  
   * [RavenDB 6.0 breaking changes](../../migration/server/previous-versions-server-breaking-changes#ravendb-6-0-breaking-changes)  
      * [License keys](../../migration/server/previous-versions-server-breaking-changes#license-keys)  
      * [RavenDB for Docker](../../migration/server/previous-versions-server-breaking-changes#ravendb-for-docker)  
      * [Unsupported sharding features](../../migration/server/previous-versions-server-breaking-changes#unsupported-sharding-features)  
      * [Graph queries](../../migration/server/previous-versions-server-breaking-changes#graph-queries)  
      * [SQL ETL](../../migration/server/previous-versions-server-breaking-changes#sql-etl)  
      * [DateOnly & TimeOnly](../../migration/server/previous-versions-server-breaking-changes#dateonly--timeonly)  
      * [Full-text search with wildcards](../../migration/server/previous-versions-server-breaking-changes#full-text-search-with-wildcards)  

</Admonition>

<Panel heading="RavenDB 7.0 breaking changes">

<ContentFrame>

## RavenDB incorporates NLog as its logging system
RavenDB's logging system has changed; the server now incorporates the 
NLog logging framework and writes all log data through it.  
One of the changes that NLog brings to RavenDB is the richer set 
of logging levels, visible right away through Studio's [admin-logs view](../../studio/server/debug/admin-logs.mdx).  
Read more about Nlog [in the dedicated article](../../server/troubleshooting/logging.mdx).
If you migrate to RavenDB `7.x` from an earlier version, please 
read the section related to NLog in the [migration page](../../migration/server/data-migration#migration-and-nlog).  
</ContentFrame>

<ContentFrame>

## Removed obsolete properties
The following properties are no longer in use, and have been removed from RavenDB `7.0`.  

* `ServerOptions`'s `AcceptEula` property is no longer used,  
  Please use `Licensing.EulaAccepted` instead.  

<TabItem value="csharp" label="csharp">
<CodeBlock language="csharp">
{`// Removed 
c bool AcceptEula
`}
</CodeBlock>
</TabItem>

* The `MemoryInfoResult` struct no longer includes these classes:  
   - `MemoryUsageIntervals`  
<TabItem value="csharp" label="csharp">
<CodeBlock language="csharp">
{`// Removed 
c sealed class MemoryUsageIntervals  
`}
</CodeBlock>
</TabItem>
   - `MemoryUsageLowHigh`  
<TabItem value="csharp" label="csharp">
<CodeBlock language="csharp">
{`// Removed 
c sealed class MemoryUsageLowHigh  
`}
</CodeBlock>
</TabItem>
</ContentFrame>

</Panel>

<Panel heading="RavenDB 6.2 breaking changes">

<ContentFrame>

## MSSQL connection string requires an Encrypt property
To establish a connection with an MSSQL server via ETL, RavenDB is required 
by the `Microsoft.Data.SqlClient` package it utilizes (which replaces the 
deprecated `System.Data.SqlClient` package we've been using in previous versions) 
to include in its connection string an `Encrypt` property that would determine 
whether to encrypt the connection or not.  

RavenDB versions preceding `6.2` (down to `6.0.105`) added this property 
to their connection strings without bothering their users, setting it to 
[Encrypt=Optional](https://learn.microsoft.com/en-us/dotnet/api/microsoft.data.sqlclient.sqlconnectionencryptoption.optional?view=sqlclient-dotnet-standard-5.2#microsoft-data-sqlclient-sqlconnectionencryptoption-optional) 
and leaving the connection unencrypted unless users set it differently on 
their own accord.  
From RavenDB 6.2 on, we no longer include this property in MSSQL connection 
strings and users are required to explicitly choose whether to encrypt the 
connection or not.  

You can go on using [Encrypt=Optional](https://learn.microsoft.com/en-us/dotnet/api/microsoft.data.sqlclient.sqlconnectionencryptoption.optional?view=sqlclient-dotnet-standard-5.2#microsoft-data-sqlclient-sqlconnectionencryptoption-optional) 
and leave your connection unencrypted, or include [Encrypt=Mandatory](https://learn.microsoft.com/en-us/dotnet/api/microsoft.data.sqlclient.sqlconnectionencryptoption.mandatory?view=sqlclient-dotnet-standard-5.2#microsoft-data-sqlclient-sqlconnectionencryptoption-mandatory) 
or [Encrypt=Strict](https://learn.microsoft.com/en-us/dotnet/api/microsoft.data.sqlclient.sqlconnectionencryptoption.strict?view=sqlclient-dotnet-standard-5.2#microsoft-data-sqlclient-sqlconnectionencryptoption-strict) 
in your connection string and provide the server you use with a valid certificate to encrypt the connection.  

Provide the connection string using code 
([like so](../../client-api/operations/maintenance/connection-strings/add-connection-string.mdx#add-an-sql-connection-string)) 
or via Studio:  

![SQL ETL task](./assets/breaking-changes_SQL-ETL-task.png)
</ContentFrame>

<ContentFrame>

## Corax handling of complex JSON objects in static indexes is configurable
The behavior of RavenDB's [Corax](../../indexes/search-engine/corax.mdx) search engine while 
handling [complex JSON objects](../../indexes/search-engine/corax.mdx#handling-of-complex-json-objects) 
in **static indexes** is now configurable using the `Indexing.Corax.Static.ComplexFieldIndexingBehavior` 
configuration option (the [handling of auto indexes](../../indexes/search-engine/corax.mdx#if-corax-encounters-a-complex-property-while-indexing) 
remains unchanged).  

* By default, `ComplexFieldIndexingBehavior` is set to **`Throw`**, instructing the search 
  engine to throw a [NotSupportedInCoraxException](../../indexes/search-engine/corax.mdx#if-corax-encounters-a-complex-property-while-indexing) 
  exception when it encounters a complex field in a static index.  

* If you prefer it, you can set `ComplexFieldIndexingBehavior` to **`Skip`** to disable the 
  indexing of complex fields without throwing an exception or raising a notification.  

<Admonition type="info" title="">

* The configuration option will apply only to [new static indexes](../../indexes/search-engine/corax.mdx#if-corax-encounters-a-complex-property-while-indexing), 
  created after the release of RavenDB `6.2`. It will not affect older indexes.  
* [ComplexFieldIndexingBehavior](../../server/configuration/indexing-configuration.mdx#indexingcoraxstaticcomplexfieldindexingbehavior) 
  can be set for a particular index as well as for all indexes.  
* Though complex fields cannot be indexed, they **can** still be [stored and projected](../../indexes/search-engine/corax.mdx#revise-index-definition-and-fields-usage).  
* To search by the contents of a static index's complex field, you can convert 
  it to a string (using `ToString` on the field value in the index definition). 
  It is recommended, though, to index [individual properties](../../indexes/search-engine/corax.mdx#index-a-simple-property-contained-in-the-complex-field) 
  of the complex field.  

</Admonition>
</ContentFrame>

<ContentFrame>

## Customizable identifier parts separator
Picking an [identifier parts separator](../../server/kb/document-identifier-generation.mdx#id-generation-by-server) 
allows you to choose which character would be placed as a separator between ID parts 
when new documents are given their IDs.  

This configuration is available in the database level as well as server-wide, but in 
versions lower than RavenDB `6.2` its server-wide level wasn't implemented even if 
a new separator was selected.  

RavenDB `6.2` applies your identifier parts separator selection in the server-wide level 
as well. This means that if you selected a separator in a RavenDB version lower than `6.2` 
and you now migrate to `6.2`, your selected separator **will become active**.  

Please be aware of this change and check this setting before migrating.  

![Identity parts separator](./assets/breaking-changes_identity-parts-separator.png)

After making this change, creating a new document with the identity prefix `|`, e.g. `user|`, 
will apply your new separator.  

![New separator](./assets/breaking-changes_new-separator.png)
</ContentFrame>

</Panel>

<Panel heading="RavenDB 6.0 breaking changes">

<ContentFrame>

## License keys
License keys for versions lower than `6.0` are **not supported** by RavenDB `6.0`.  
If you own a valid license key for RavenDB `5.x` or lower, please upgrade it using 
the quick online interface described [here](../../licensing/replace-license.mdx#upgrade-a-license-key-for-ravendb-6x).
</ContentFrame>

<ContentFrame>

## RavenDB for Docker
RavenDB now applies an improved security model, and uses a **dedicated user** rather than `root`.  
Read more about this change [here](../../migration/server/docker.mdx).  
</ContentFrame>

<ContentFrame>

## Unsupported sharding features
RavenDB `6.0` introduces [sharding](../../sharding/overview.mdx). 
Server and client features that are currently unavailable in a sharded database (but remain available in regular databases) are listed [here](../../sharding/unsupported.mdx).  
</ContentFrame>

<ContentFrame>

## Graph queries
[Graph Queries](https://ravendb.net/docs/article-page/5.4/csharp/indexes/querying/graph/graph-queries-overview) support, 
available in RavenDB versions `4.2` to `5.x`, has been removed from the RavenDB `6.x` server and client API.  
</ContentFrame>

<ContentFrame>

## SQL ETL
SQL ETL no longer tolerates errors on `Load`, load errors are thrown immediately.  
This is done to distinguish partial load errors that are used in SQL ETL from, for example, commit errors that may happen during load.
(Prior to this change, the ETL would just advance instead of retrying.)
</ContentFrame>

<ContentFrame>

## DateOnly & TimeOnly
[DateOnly and TimeOnly](../../client-api/how-to/using-timeonly-and-dateonly.mdx) types are now supported for every new auto index.  
</ContentFrame>

<ContentFrame>

## Full-text search with wildcards
Starting with `6.0` we have changed how the [Search method](../../indexes/querying/searching.mdx) handles wildcards when they are included in search terms:

<Admonition type="note" title="">

##### Behavior for versions lower than `6.0`:  
After the analyzer stripped wildcards from the search term, 
RavenDB would attempt to restore the `*` to their original positions before sending the term to the search engine (Lucene or Corax). 

</Admonition>

<Admonition type="note" title="">

##### Behavior for `6.0` and up:
Once wildcards are stripped by the analyzer, we no longer add them back before sending the term to the search engine.
The search terms sent to the search engine are solely based on the transformations applied by the analyzer used in the index.

Note the different behavior in the following cases:  

* **When using `RavenStandardAnalyzer` or `StandardAnalyzer` or `NGramAnalyzer`**:  
  The queried terms in the _Search_ method are processed with the `LowerCaseKeywordAnalyzer` before being sent to the search engine.
* **When using a custom analyzer**:  
  The queried terms in the _Search_ method are processed according to the custom analyzer's logic.
* **When using the Exact analyzer**:  
  The queried terms in the _Search_ method remain untouched as produced by the exact analyzer. 

<Admonition type="info" title="">
When using **Corax** as the search engine,  
this behavior will only apply to indexes that are newly created or have been reset.
</Admonition>

See detailed examples in: [Searching with wildcards](../../indexes/querying/searching.mdx#searching-with-wildcards).

</Admonition>

</ContentFrame>

</Panel>
import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import ContentFrame from '@site/src/components/ContentFrame';
import Panel from '@site/src/components/Panel';

<Admonition type="note" title="">

* Attachments can be copied, moved, or renamed using built-in session methods.  

* All of those actions are executed when `saveChanges` is called and take place on the server-side,  
  removing the need to transfer the entire attachment binary data over the network in order to perform the action.

* In this page:  
  * [Copy attachment](../../document-extensions/attachments/copying-moving-renaming.mdx#copy-attachment)
  * [Move attachment](../../document-extensions/attachments/copying-moving-renaming.mdx#move-attachment)
  * [Rename attachment](../../document-extensions/attachments/copying-moving-renaming.mdx#rename-attachment)
  * [Syntax](../../document-extensions/attachments/copying-moving-renaming.mdx#syntax)

</Admonition>

## Copy attachment

Use `session.advanced.attachments.copy` to copy an attachment from one document to another.

<Tabs groupId='languageSyntax'>
<TabItem value="Copy_with_entity" label="Copy_with_entity">
<CodeBlock language="js">
{`// Load entities
const employee1 = await session.load("employees/1-A");
const employee2 = await session.load("employees/2-A");

// Call method 'copy'
// Copy attachment from employee1 to employee2
session.advanced.attachments.copy(employee1, "photo.jpg", employee2, "photo-copy.jpg");

// Attachment will be copied on the server-side only when saveChanges is called
await session.saveChanges();
`}
</CodeBlock>
</TabItem>
<TabItem value="Copy_with_document_ID" label="Copy_with_document_ID">
<CodeBlock language="js">
{`// Call method 'copy'
// Copy attachment from "employees/1-A" to "employees/2-A"
session.advanced.attachments.copy("employees/1-A", "photo.jpg", "employees/2-A", "photo-copy.jpg");

// Attachment will be copied on the server-side only when saveChanges is called
await session.saveChanges();
`}
</CodeBlock>
</TabItem>
</Tabs>

## Move attachment

Use `session.advanced.attachments.move` to move an attachment from one document to another.

<Tabs groupId='languageSyntax'>
<TabItem value="Move_with_entity" label="Move_with_entity">
<CodeBlock language="js">
{`// Load entities 
const employee1 = await session.load("employees/1-A");
const employee2 = await session.load("employees/2-A");

// Call method 'move'
// Move attachment from employee1 to employee2
session.advanced.attachments.move(employee1, "photo.jpg", employee2, "photo.jpg");

// Attachment will be moved on the server-side only when saveChanges is called
await session.saveChanges();
`}
</CodeBlock>
</TabItem>
<TabItem value="Move_with_document_ID" label="Move_with_document_ID">
<CodeBlock language="js">
{`// Call method 'move'
// Move attachment from "employees/1-A" to "employees/2-A"
session.advanced.attachments.move("employees/1-A", "photo.jpg", "employees/2-A", "photo.jpg");

// Attachment will be moved on the server-side only when saveChanges is called
await session.saveChanges();
`}
</CodeBlock>
</TabItem>
</Tabs>

## Rename attachment

Use `session.advanced.attachments.rename` to rename an attachment.

<Tabs groupId='languageSyntax'>
<TabItem value="Rename_with_entity" label="Rename_with_entity">
<CodeBlock language="js">
{`// Load entity
const employee = await session.load("employees/1-A");

// Call method 'rename'
// Rename "photo.jpg"
session.advanced.attachments.rename(employee, "photo.jpg", "photo-new.jpg");

// Attachment will be renamed on the server-side only when saveChanges is called
await session.saveChanges();
`}
</CodeBlock>
</TabItem>
<TabItem value="Rename_with_document_ID" label="Rename_with_document_ID">
<CodeBlock language="js">
{`// Call method 'rename'
// Rename "photo.jpg"
session.advanced.attachments.rename("employees/1-A", "photo.jpg", "photo-new.jpg");

// Attachment will be renamed on the server-side only when saveChanges is called
await session.saveChanges();
`}
</CodeBlock>
</TabItem>
</Tabs>

## Syntax

<TabItem value="syntax_copy" label="syntax_copy">
<CodeBlock language="js">
{`// Copy - available overloads:
// ===========================
copy(sourceEntity, sourceName, destinationEntity, destinationName);
copy(sourceDocumentId, sourceName, destinationDocumentId, destinationName);
`}
</CodeBlock>
</TabItem>

<TabItem value="syntax_move" label="syntax_move">
<CodeBlock language="js">
{`// Move - available overloads:
// =============================
move(sourceEntity, sourceName, destinationEntity, destinationName);
move(sourceDocumentId, sourceName, destinationDocumentId, destinationName);
`}
</CodeBlock>
</TabItem>

| Parameter                 | Type     | Description                 |
|---------------------------|----------|-----------------------------|
| **sourceEntity**          | `object` | Source entity               |
| **destinationEntity**     | `object` | Destination entity          |
| **sourceDocumentId**      | string   | Source document Id          |
| **destinationDocumentId** | string   | Destination document Id     |
| **sourceName**            | string   | Source attachment name      |
| **destinationName**       | string   | Destination attachment name |


<TabItem value="syntax_rename" label="syntax_rename">
<CodeBlock language="js">
{`// Rename - available overloads:
// ==============================
rename(entity, name, newName);
rename(documentId, name, newName);
`}
</CodeBlock>
</TabItem>

| Parameter      | Type     | Description                     |
|----------------|----------|---------------------------------|
| **entity**     | `object` | The document entity             |
| **documentId** | string   | The document Id                 |
| **name**       | string   | Current name of attachment      |
| **newName**    | string   | The new name for the attachment |





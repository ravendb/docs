---
title: "Schema validation overview"
hide_table_of_contents: true
sidebar_label: "Overview"
sidebar_position: 0
---

import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';
import LanguageSwitcher from "@site/src/components/LanguageSwitcher";
import LanguageContent from "@site/src/components/LanguageContent";

# Schema validation overview
<Admonition type="note" title="">

* A validation schema is a JSON object associated with a document collection.  
  If a schema is enabled for a collection, documents can be saved in it only if the documents comply with the constraints defined by the schema.  

* Validation is enforced both when documents are saved directly, and when they are added or modified via [supported batch operations](../../documents/schema-validation/schema-validation_overview#a-list-of-operations-that-trigger-validation) such as patching or ETL tasks.

* Validating document compliance during writing can help ensure data consistency (e.g., by preventing the saving of documents with missing required fields) and simplify read-time handling by preventing the need for additional checks and transformations.

* Schemas can be configured per collection using [Studio](../../documents/schema-validation/validate-documents/validate-documents_studio) or the [client API](../../documents/schema-validation/validate-documents/validate-documents_api).

* In this article:  
   * [The validation process](../../documents/schema-validation/schema-validation_overview#the-validation-process)  
   * [A list of operations that trigger validation](../../documents/schema-validation/schema-validation_overview#a-list-of-operations-that-trigger-validation)  
   * [Available constraints](../../documents/schema-validation/schema-validation_overview#available-constraints)  
   * [Considerations](../../documents/schema-validation/schema-validation_overview#considerations)
   * [Use cases](../../documents/schema-validation/schema-validation_overview#use-cases)

</Admonition>

## The validation process

Schema validation is performed by the server, when a schema is defined for a collection and a document that belongs to this collection is written. The document is then validated against the schema before being saved to the database.  
If the validation fails, the operation stops and a detailed [SchemaValidationException](../../documents/schema-validation/validate-documents/validate-documents_api#schemavalidationexception-message) is thrown.  

## A list of operations that trigger validation
Validation is triggered during writing by these operations:
* `session.SaveChanges()` / `session.SaveChangesAsync()`  
  Validates documents while committing staged document changes in the session to the database.  
* `BulkInsert.StoreAsync()`  
  Validates each document when performing a bulk insert operation.  
* `RevertRevisionsByIdOperation`  
  Validates documents when reverting to a previous revision.
* `PatchByQueryOperation`  
  Validates documents updated by a patch query.  
* `Smuggler.ImportAsync()` / `Smuggler.ImportDatabaseOperation()`  
  Validates documents when importing data using the Smuggler tool.
* `ETL tasks`  
  Validates documents as they are transferred via an Extract/Transform/Load process.  

Validation is **not** applied during these operations:  
* `Replication`  
  When replicating documents to cluster nodes or via external replication.  
* `Backup.RestoreDatabase()`  
  When documents are restored from backup.  

## Available constraints
A validation schema can enforce these constraints on documents:  
* [Type](../../documents/schema-validation/validate-documents/validate-documents_api#type)  
* [Required Properties](../../documents/schema-validation/validate-documents/validate-documents_api#required)  
* [Constant Value](../../documents/schema-validation/validate-documents/validate-documents_api#const)  
* [Allowed Values](../../documents/schema-validation/validate-documents/validate-documents_api#enum)  
* [String Minimum Length](../../documents/schema-validation/validate-documents/validate-documents_api#minlength)  
* [String Maximum Length](../../documents/schema-validation/validate-documents/validate-documents_api#maxlength)  
* [Pattern (Regex)](../../documents/schema-validation/validate-documents/validate-documents_api#pattern)  
* [Number Minimum Value](../../documents/schema-validation/validate-documents/validate-documents_api#minimum)  
* [Number Maximum Value](../../documents/schema-validation/validate-documents/validate-documents_api#maximum)  
* [Array Minimum Items](../../documents/schema-validation/validate-documents/validate-documents_api#minitems)  
* [Array Maximum Items](../../documents/schema-validation/validate-documents/validate-documents_api#maxitems)  
* [Properties](../../documents/schema-validation/validate-documents/validate-documents_api#properties)  
* [patternProperties](../../documents/schema-validation/validate-documents/validate-documents_api#patternproperties)  
* [Additional Properties](../../documents/schema-validation/validate-documents/validate-documents_api#additionalproperties)  
* [Items](../../documents/schema-validation/validate-documents/validate-documents_api#items)  
* [Dependencies](../../documents/schema-validation/validate-documents/validate-documents_api#dependencies)  
* [Null](../../documents/schema-validation/validate-documents/validate-documents_api#null)  

## Considerations
Take note of the following considerations when applying schema validation.
* **Performance impact**:  
  Schema validation introduces additional processing during write operations. While this overhead is generally minimal, it can become significant with very large bulk operations or complex schemas. It's important to monitor performance and optimize schemas as needed.
* **Schema evolution**:  
  As application requirements change, schemas may need to be updated. Care should be taken to manage schema changes, especially in production environments, to avoid unintended validation failures.
* **Error handling**:  
  Applications should implement robust error handling to manage validation failures gracefully. This includes providing meaningful feedback to users or logging errors for further analysis.
* **Testing**:  
  Thoroughly test schemas and validation logic in development environments before deploying to production to ensure that they behave as expected.  

## Use cases
A few scenarios where schema validation can help are:  
* **Ensuring Required Fields**  
  E.g., preventing the saving of a user profile without an email address.  
* **Enforcing Data Types**  
  E.g., making sure that fields like “age” are always numbers and not accidentally saved as strings or other types.  
* **Restricting Allowed Values**  
  E.g., limiting a field (like “status”) to specific values like “active”, “inactive”, or “pending”, and rejecting any other input.  
* **Maintaining Consistent Structure in Arrays**  
  E.g., ensuring that every item in an array (like a list of order items) follows the same structure and contains all required properties.  
* **Preventing Invalid Data During Integrations**  
  E.g., blocking documents with unexpected or malformed data from being saved during ETL or API imports, to protect downstream systems.  
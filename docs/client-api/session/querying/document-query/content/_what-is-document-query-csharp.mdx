import Admonition from '@theme/Admonition';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import CodeBlock from '@theme/CodeBlock';

<Admonition type="note" title="">

* RavenDB Queries can be executed via `Query`, `DocumentQuery` or directly using `RQL`.  
  Learn more in [Query Overview](../../../../../querying/overview.mdx).

* Unlike the `Query` method, the `DocumentQuery` method does Not support LINQ.  
  However, it gives you more flexibility and control over the process of building a query,  
  as it provides low-level querying capabilities. See [Query -vs- DocumentQuery](../../../../../client-api/session/querying/document-query/query-vs-document-query.mdx) for all differences.

* In this page:
  * [DocumentQuery examples](../../../../../client-api/session/querying/document-query/what-is-document-query.mdx#documentquery-examples)
  * [Convert between DocumentQuery and Query](../../../../../client-api/session/querying/document-query/what-is-document-query.mdx#convert-between-documentquery-and-query)
  * [Custom Methods and Extensions](../../../../../client-api/session/querying/document-query/what-is-document-query.mdx#custom-methods-and-extensions)
  * [Syntax](../../../../../client-api/session/querying/document-query/what-is-document-query.mdx#syntax)

</Admonition>
## DocumentQuery examples

#### Query collection - no filtering

<Tabs groupId='languageSyntax'>
<TabItem value="DocumentQuery" label="DocumentQuery">
<CodeBlock language="csharp">
{`// Query for all documents from 'Employees' collection
List<Employee> allEmployees = session.Advanced
    .DocumentQuery<Employee>()
    .ToList();
`}
</CodeBlock>
</TabItem>
<TabItem value="DocumentQuery_async" label="DocumentQuery_async">
<CodeBlock language="csharp">
{`// Query for all documents from 'Employees' collection
List<Employee> allEmployees = await asyncSession.Advanced
    .AsyncDocumentQuery<Employee>() 
    .ToListAsync();
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Employees"
`}
</CodeBlock>
</TabItem>
</Tabs>
#### Query collection - by ID

<Tabs groupId='languageSyntax'>
<TabItem value="DocumentQuery" label="DocumentQuery">
<CodeBlock language="csharp">
{`// Query collection by document ID
Employee employee = session.Advanced
    .DocumentQuery<Employee>()
    .WhereEquals(x => x.Id, "employees/1-A")
    .FirstOrDefault();
`}
</CodeBlock>
</TabItem>
<TabItem value="DocumentQuery_async" label="DocumentQuery_async">
<CodeBlock language="csharp">
{`// Query collection by document ID
Employee employee = await asyncSession.Advanced
    .AsyncDocumentQuery<Employee>()
    .WhereEquals(x => x.Id, "employees/1-A")
    .FirstOrDefaultAsync();
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Employees" where id() == "employees/1-A"
`}
</CodeBlock>
</TabItem>
</Tabs>
#### Query collection - with filtering

<Tabs groupId='languageSyntax'>
<TabItem value="DocumentQuery" label="DocumentQuery">
<CodeBlock language="csharp">
{`// Query collection - filter by document field
List<Employee> employees = session.Advanced
    .DocumentQuery<Employee>()
    .WhereEquals(x => x.FirstName, "Robert")
    .ToList();
`}
</CodeBlock>
</TabItem>
<TabItem value="DocumentQuery_async" label="DocumentQuery_async">
<CodeBlock language="csharp">
{`// Query collection - filter by document field
List<Employee> employees = await asyncSession.Advanced
    .AsyncDocumentQuery<Employee>()
    .WhereEquals(x => x.FirstName, "Robert")
    .ToListAsync();
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Employees" where FirstName == "Robert"
`}
</CodeBlock>
</TabItem>
</Tabs>
#### Query collection - with paging

<Tabs groupId='languageSyntax'>
<TabItem value="DocumentQuery" label="DocumentQuery">
<CodeBlock language="csharp">
{`// Query collection - page results
List<Product> products = session.Advanced
    .DocumentQuery<Product>()
    .Skip(5)   // Skip first 5 results
    .Take(10)  // Load up to 10 entities from 'Products' collection
    .ToList();
`}
</CodeBlock>
</TabItem>
<TabItem value="DocumentQuery_async" label="DocumentQuery_async">
<CodeBlock language="csharp">
{`// Query collection - page results
List<Product> products = await asyncSession.Advanced
    .AsyncDocumentQuery<Product>()
    .Skip(5)   // Skip first 5 results
    .Take(10)  // Load up to 10 entities from 'Products' collection
    .ToListAsync();
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Products" limit 5, 10 // skip 5, take 10
`}
</CodeBlock>
</TabItem>
</Tabs>
#### Query an index

Please refer to [Querying an index](../../../../../indexes/querying/query-index.mdx#sessionadvanceddocumentquery) for examples of querying an index using a DocumentQuery.



## Convert between DocumentQuery and Query

#### DocumentQuery to Query

A `DocumentQuery` can be converted to a `Query`.  
This enables you to take advantage of all available LINQ extensions provided by RavenDB.  

<Tabs groupId='languageSyntax'>
<TabItem value="DocumentQuery" label="DocumentQuery">
<CodeBlock language="csharp">
{`// Define a DocumentQuery
var docQuery = session.Advanced
    .DocumentQuery<Order>(); // 'IDocumentQuery' instance

// Convert to Query
var query = docQuery.ToQueryable(); // 'IRavenQueryable' instance

// Apply any 'IRavenQueryable' LINQ extension
var queryResults = query
    .Where(x => x.Freight > 25)
    .ToList();
`}
</CodeBlock>
</TabItem>
<TabItem value="DocumentQuery_async" label="DocumentQuery_async">
<CodeBlock language="csharp">
{`// Define a DocumentQuery
var docQuery = asyncSession.Advanced
    .AsyncDocumentQuery<Order>(); // 'IAsyncDocumentQuery' instance

// Convert to Query
var query = docQuery.ToQueryable(); // 'IRavenQueryable' instance

// Apply any 'IRavenQueryable' LINQ extension
var queryResults = await query
    .Where(x => x.Freight > 25) 
    .ToListAsync();
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Orders" where Freight > 25
`}
</CodeBlock>
</TabItem>
</Tabs>

Convert `DocumentQuery` to `Query` when you need to project data from a related document  
in a dynamic query.

<Tabs groupId='languageSyntax'>
<TabItem value="DocumentQuery" label="DocumentQuery">
<CodeBlock language="csharp">
{`// Define a DocumentQuery
var docQuery = session.Advanced
    .DocumentQuery<Order>()
    .WhereGreaterThan("Freight", 25);

// Convert to Query
var query = docQuery.ToQueryable();

// Define the projection on the query using LINQ
var projectedQuery = from order in query
    // Load the related document
    let company = session.Load<Company>(order.Company)
    // Define the projection
    select new
    {
        Freight = order.Freight,   // data from the Order document
        CompanyName = company.Name // data from the related Company document
    };

// Execute the query
var queryResults = projectedQuery.ToList();
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Orders" as o
where o.Freight > 25
load o.Company as c
select {
    Freight: o.Freight,
    CompanyName: c.Name
}
`}
</CodeBlock>
</TabItem>
</Tabs>
#### Query to DocumentQuery

A `Query` can be converted to a `DocumentQuery`.  
This enables you to take advantage of the API available only for _DocumentQuery_.  

<Tabs groupId='languageSyntax'>
<TabItem value="DocumentQuery" label="DocumentQuery">
<CodeBlock language="csharp">
{`// Define a Query
var query = session
    .Query<Order>()
    .Where(x => x.Freight > 25);
    
// Convert to DocumentQuery
var docQuery = query.ToDocumentQuery();

// Apply a DocumentQuery method (e.g. IncludeExplanations is Not available on Query)
docQuery.IncludeExplanations(out Explanations exp);

// Execute the query
var docQueryResults = docQuery.ToList();
`}
</CodeBlock>
</TabItem>
<TabItem value="DocumentQuery_async" label="DocumentQuery_async">
<CodeBlock language="csharp">
{`// Define a Query
var query = asyncSession
    .Query<Order>()
    .Where(x => x.Freight > 25);
    
// Convert to DocumentQuery
var docQuery = query.ToAsyncDocumentQuery();

// Apply a DocumentQuery method (e.g. IncludeExplanations is Not available on Query)
docQuery.IncludeExplanations(out Explanations exp);

// Execute the query
var docQueryResults = docQuery.ToListAsync();
`}
</CodeBlock>
</TabItem>
<TabItem value="RQL" label="RQL">
<CodeBlock language="sql">
{`from "Orders"
where Freight > 25
include explanations()
`}
</CodeBlock>
</TabItem>
</Tabs>



## Custom Methods and Extensions

<Admonition type="note" title="">

Several methods share the same functionality as their `Query` counterparts.  
Refer to the corresponding documentation articles, marked with links starting with "[Query]" in the list below.

</Admonition>

Available custom methods and extensions:   

- AddOrder
- [Query] [AfterQueryExecuted](../../../../../client-api/session/querying/how-to-customize-query.mdx#afterqueryexecuted)
- [Query] [AfterStreamExecuted](../../../../../client-api/session/querying/how-to-customize-query.mdx#afterstreamexecuted)
- [Query] [AggregateBy](../../../../../client-api/session/querying/how-to-perform-a-faceted-search.mdx)
- [Query] [AggregateUsing](../../../../../client-api/session/querying/how-to-perform-a-faceted-search.mdx)
- AndAlso
- [Query] [BeforeQueryExecuted](../../../../../client-api/session/querying/how-to-customize-query.mdx#beforequeryexecuted)
- [Boost](../../../../../client-api/session/querying/text-search/boost-search-results.mdx)
- CloseSubclause
- CmpXchg
- ContainsAll
- ContainsAny
- [Count](../../../../../client-api/session/querying/how-to-count-query-results.mdx)
- [CountLazily](../../../../../client-api/session/querying/how-to-perform-queries-lazily.mdx#lazy-count-query)
- Distinct
- ExplainScores
- First
- FirstOrDefault
- Fuzzy
- GetIndexQuery
- GetQueryResult
- [GroupBy](../../../../../client-api/session/querying/how-to-perform-group-by-query.mdx)
- [GroupByArrayValues](../../../../../client-api/session/querying/how-to-perform-group-by-query.mdx#by-array-values)
- [GroupByArrayContent](../../../../../client-api/session/querying/how-to-perform-group-by-query.mdx#by-array-content)
- [Query] [Highlight](../../../../../client-api/session/querying/text-search/highlight-query-results.mdx)
- Include
- IncludeExplanations
- Intersect
- InvokeAfterQueryExecuted
- InvokeAfterStreamExecuted
- [Query] [Lazily](../../../../../client-api/session/querying/how-to-perform-queries-lazily.mdx)
- [LongCount](../../../../../client-api/session/querying/how-to-count-query-results.mdx)
- MoreLikeThis
- NegateNext
- [Not](../../../../../client-api/session/querying/document-query/how-to-use-not-operator.mdx)
- [Query] [NoCaching](../../../../../client-api/session/querying/how-to-customize-query.mdx#nocaching)
- [Query] [NoTracking](../../../../../client-api/session/querying/how-to-customize-query.mdx#notracking)
- OfType
- OpenSubclause
- [OrderBy](../../../../../client-api/session/querying/sort-query-results.mdx)
- [OrderByDescending](../../../../../client-api/session/querying/sort-query-results.mdx)
- [Query] [OrderByDistance](../../../../../client-api/session/querying/how-to-make-a-spatial-query.mdx#orderbydistance)
- [Query] [OrderByDistanceDescending](../../../../../client-api/session/querying/how-to-make-a-spatial-query.mdx#orderbydistancedesc)
- [OrderByScore](../../../../../client-api/session/querying/sort-query-results.mdx#order-by-score)
- [OrderByScoreDescending](../../../../../client-api/session/querying/sort-query-results.mdx#order-by-score)
- OrElse
- [Query] [Projection](../../../../../client-api/session/querying/how-to-customize-query.mdx#projection)
- Proximity
- [Query] [RandomOrdering](../../../../../client-api/session/querying/how-to-customize-query.mdx#randomordering)
- [Query] [RelatesToShape](../../../../../client-api/session/querying/how-to-make-a-spatial-query.mdx#search-by-shape)
- [Search](../../../../../client-api/session/querying/text-search/full-text-search.mdx)
- SelectFields
- SelectTimeSeries
- Single
- SingleOrDefault
- Skip
- [Query] [Spatial](../../../../../client-api/session/querying/how-to-make-a-spatial-query.mdx)
- Statistics
- [SuggestUsing](../../../../../client-api/session/querying/how-to-work-with-suggestions.mdx)
- Take
- [Query] [Timings](../../../../../client-api/session/querying/how-to-customize-query.mdx#timings)
- UsingDefaultOperator
- [Query] [WaitForNonStaleResults](../../../../../client-api/session/querying/how-to-customize-query.mdx#waitfornonstaleresults)
- Where
- WhereBetween
- [WhereEndsWith](../../../../../client-api/session/querying/text-search/ends-with-query.mdx)
- WhereEquals
- [WhereExists](../../../../../client-api/session/querying/how-to-filter-by-field.mdx)
- WhereGreaterThan
- WhereGreaterThanOrEqual
- WhereIn
- WhereLessThan
- WhereLessThanOrEqual
- [WhereLucene](../../../../../client-api/session/querying/document-query/how-to-use-lucene.mdx)
- WhereNotEquals
- [WhereRegex](../../../../../client-api/session/querying/text-search/using-regex.mdx)
- [WhereStartsWith](../../../../../client-api/session/querying/text-search/starts-with-query.mdx)
- WithinRadiusOf



## Syntax

The available `DocumentQuery` overloads are listed in this [Syntax section](../../../../../querying/overview.mdx#syntax) in the [Query Overview](../../../../../querying/overview.mdx).




